@model StudentPortal.Models.AddStudentViewModel

<div class="container py-4" style="max-width: 500px">
    <h1 class="h3 mb-4">Add Student</h1>
    <form method="post">
        <!-- ID -->
        <div class="mb-3">
            <div class="form-floating">
                <input type="text"
                       class="form-control"
                       asp-for="StudentId"
                       placeholder="ID"
                       maxlength="8"
                       oninput="this.value = this.value.replace(/[^0-9]/g, '').slice(0, 8);"
                       pattern="\d{8}"
                       title="Please enter exactly 8 digits" />
                <label asp-for="StudentId">ID</label>
                <span asp-validation-for="StudentId" class="text-danger"></span>
            </div>
        </div>

        <!-- First Name -->
        <div class="mb-3">
            <div class="form-floating">
                <input type="text" class="form-control" asp-for="FirstName" placeholder="First Name" />
                <label asp-for="FirstName">First Name</label>
                <span asp-validation-for="FirstName" class="text-danger"></span>
            </div>
        </div>

        <!-- Middle Name -->
        <div class="mb-3">
            <div class="form-floating">
                <input type="text" class="form-control" asp-for="MiddleName" placeholder="Middle Name" />
                <label asp-for="MiddleName">Middle Name</label>
            </div>
        </div>

        <!-- Last Name -->
        <div class="mb-3">
            <div class="form-floating">
                <input type="text" class="form-control" asp-for="LastName" placeholder="Last Name" />
                <label asp-for="LastName">Last Name</label>
                <span asp-validation-for="LastName" class="text-danger"></span>
            </div>
        </div>

        <!-- Year and Course Row -->
        <div class="row g-3 mb-3">
            <div class="col-md-6">
                <div class="form-floating">
                    <select class="form-select" asp-for="Year" style="padding-top: 1rem;">
                        <option value="">Select Year</option>
                        <option value="1">1st Year</option>
                        <option value="2">2nd Year</option>
                        <option value="3">3rd Year</option>
                        <option value="4">4th Year</option>
                    </select>
                    <label asp-for="Year">Year</label>
                    <span asp-validation-for="Year" class="text-danger"></span>
                </div>
            </div>
            <div class="col-md-6">
                <div class="form-floating">
                    <select class="form-select" asp-for="Course" style="padding-top: 1rem;">
                        <option value="">Select Course</option>
                        <option value="BSIT">BSIT</option>
                        <option value="BSIS">BSIS</option>
                    </select>
                    <label asp-for="Course">Course</label>
                    <span asp-validation-for="Course" class="text-danger"></span>
                </div>
            </div>
        </div>

        <!-- Remarks -->
        <div class="mb-3">
            <div class="form-floating">
                <select class="form-select" asp-for="Remarks" style="padding-top: 1rem;">
                    <option value="">Select Remarks</option>
                    <option value="Shiftee">Shiftee</option>
                    <option value="Transfereee">Transfereee</option>
                    <option value="New">New</option>
                    <option value="Old">Old</option>
                    <option value="Cross-Enrollee">Cross-Enrollee</option>
                </select>
                <label asp-for="Remarks">Remarks</label>
                <span asp-validation-for="Remarks" class="text-danger"></span>
            </div>
        </div>

        <!-- Submit Button -->
        <div class="row g-3">
            <div class="col-md-6">
                <button type="submit" class="btn btn-outline-primary w-100 py-2">Save</button>
            </div>
            <div class="col-md-6">
                <a asp-action="List" asp-controller="Students" class="btn btn-outline-secondary w-100 py-2">Cancel</a>
            </div>
        </div>
        
    </form>
</div>

<style>
    .form-floating > .form-control,
    .form-floating > .form-select {
        height: 3.5rem;
        line-height: 1.25;
    }

    .form-floating > label {
        padding: 0.75rem;
    }

    .form-select {
        height: 3.5rem !important;
    }

    .text-danger {
        font-size: 0.875rem;
        margin-top: 0.25rem;
    }

    /* Fix for select dropdowns */
    .form-floating > .form-select {
        padding-bottom: 0.25rem;
    }

    /* Ensure dropdown text is fully visible */
    select.form-select option {
        padding: 10px;
    }
</style>

@section Scripts {
    @{
        await Html.RenderPartialAsync("_ValidationScriptsPartial");
    }

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            var studentIdInput = document.querySelector('[asp-for="StudentId"]');

            studentIdInput.addEventListener('keypress', function(e) {
                // Prevent entering more than 8 digits
                if (this.value.length >= 8) {
                    e.preventDefault();
                }

                // Allow only numbers
                if (e.key < '0' || e.key > '9') {
                    e.preventDefault();
                }
            });

            studentIdInput.addEventListener('paste', function(e) {
                e.preventDefault();
                var pastedText = (e.clipboardData || window.clipboardData).getData('text');
                var numbersOnly = pastedText.replace(/[^0-9]/g, '').slice(0, 8);
                this.value = numbersOnly;
            });
        });
    </script>
}